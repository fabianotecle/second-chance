"use strict";(()=>{var D="https://restcountries.com/v3.1/all?fields=name,cca2,idd,flags",I="./json/us-country.json",S=["US","PR","RU","EH","KZ","VA","DO","SH"],d=[];async function v(){(await g()).forEach(function(t){let n=t.idd.root,o=t.cca2;if(n){let l=t.idd.suffixes[0];l&&!S.includes(o)&&(n+=l)}let i={code:o,flag:t.flags.svg,prefix:n,name:t.name.common};d.push(i)})}async function g(){try{return(await fetch(D)).json()}catch(e){return(await fetch(I)).json()}}function b(){d=d.sort((t,n)=>t.code<n.code?-1:t.code>n.code?1:0)}async function y(){return await v(),b(),d}var w=_();function _(){return navigator.language.split("-")[1]}function m(){let e=0,t=!1,n=document.getElementById("country_"+e);for(;n&&!t;){let o=n.childNodes[1];if(w===o.innerHTML){u();let i=f(n);E(i),t=!0}e=e+1,n=document.getElementById("country_"+e)}}var r={LIST:".prefix-dropdown_list",TOGGLE:".prefix-dropdown_toggle",WRAPPER:".prefix-dropdown_list-wrapper",CHEVRON:".prefix-dropdown_chevron",CURRENT:".w--current",COMPONENT:".prefix-dropdown_component",ITEM:".prefix-dropdown_item"},s={FIELD_INPUT:".text-field.w-input",ELEMENT:"phone-form",FAIL_DIV:".w-form-fail",THANKS_DIV:".w-form-done",PHONE_NUMBER:'[name="phoneNumber"]',COUNTRY_CODE:'[name="countryCode"]',SUBMIT_BUTTON:".button.w-button"};function h(){let e=document.querySelector(r.LIST);e&&e.firstElementChild&&e.removeChild(e.firstElementChild)}function R(e){let t=0,n=document.querySelector(r.LIST);n&&e.forEach(o=>{let i=x(o),l=k(o),T=A(o,t);T.appendChild(i),T.appendChild(l),n.appendChild(T),t=t+1})}function x(e){let t=document.createElement("img");return t.src=e.flag,t.setAttribute("data-element","flag"),t.setAttribute("loading","lazy"),t.setAttribute("alt",e.name),t.className="prefix-dropdown_flag",t}function k(e){let t=document.createElement("div");return t.setAttribute("data-element","value"),t.setAttribute("data-prefix",e.prefix),t.innerHTML=e.code,t}function A(e,t){let n=document.createElement("a");return n.setAttribute("data-element","item"),n.setAttribute("aria-role","option"),n.setAttribute("aria-selected","false"),n.setAttribute("aria-label",e.name),n.setAttribute("title",e.name),n.setAttribute("data-index",String(t)),n.setAttribute("id","country_"+t),n.href="#",n.className="prefix-dropdown_item w-inline-block",n.addEventListener("click",function(o){U(o,this)}),n}function U(e,t){e.preventDefault();let n=f(t);E(n),L()}function F(e){let t=document.querySelector(s.COUNTRY_CODE);t&&(t.value=e.prefix)}function P(e){let t=document.querySelector(r.TOGGLE);t&&(q(e,t),B(e,t))}function q(e,t){let n=t.childNodes[0];n.src=e.flag,n.alt=e.name+" Flag"}function B(e,t){let n=t.childNodes[2];n.innerHTML=e.prefix}function W(e){document.querySelectorAll(r.ITEM).forEach(function(t){let n=t;n.title!==e.name?n.classList.remove("w--current"):(n.classList.add("w--current"),c=parseInt(n.getAttribute("data-index")))})}function G(){let e=document.querySelector(r.WRAPPER);e&&(e.style.transition="all 0.075s linear",e.style.display="block")}function V(){let e=document.querySelector(r.CHEVRON);e&&(e.style.transition="all 0.075s linear",e.style.transform="rotate(180deg)")}function j(){let e=document.querySelector(r.CHEVRON);e&&(e.style.transition="all 0.075s linear",e.style.transform="rotate(0deg)")}function K(){let e=document.querySelector(r.WRAPPER);e&&(e.style.transition="all 0.075s linear",e.style.display="none")}var O=2.2;function Y(){let e=document.querySelector(r.CURRENT),t=document.querySelector(r.LIST);if(e&&t){e.offsetTop!==0&&(t.scrollTop=e.offsetTop-t.clientHeight/O);let n=e.getAttribute("data-index");c=parseInt(n)}}var c=1;function p(e){let t=document.querySelector(r.LIST);t&&(t.scrollTop=e.offsetTop-t.clientHeight/O,e.classList.add("arrowSelected"))}function J(){let e=document.querySelector(r.TOGGLE);e&&(e.addEventListener("keydown",function(t){switch(t.key){case"ArrowDown":C(t,"down");break;case"ArrowUp":C(t,"up");break;case"Enter":M(t);break;case" ":M(t);break;case"Escape":a();break;case"Tab":a();break;default:$(t);break}}),e.addEventListener("click",function(){L()}))}function X(e){let t=e.toUpperCase(),n=0,o=0,i=document.getElementById("country_"+n);for(;i&&!o;){let l=i.childNodes[1];t===l.innerHTML.charAt(0)&&(u(),c=n,p(i),o=1),n=n+1,i=document.getElementById("country_"+n)}}function N(e){h(),R(e),m(),J()}function f(e){let t=e.childNodes[1],n=e.childNodes[0];return{code:t.innerHTML,prefix:t.getAttribute("data-prefix"),flag:n.src,name:e.title}}function E(e){F(e),P(e),W(e)}function L(){let e=document.querySelector(r.COMPONENT);e&&!e.classList.contains("open")?(e.classList.add("open"),G(),V()):a(),Y()}function a(){let e=document.querySelector(r.COMPONENT);e&&e.classList.contains("open")&&(e.classList.remove("open"),K(),j(),u())}function u(){document.querySelectorAll(r.ITEM).forEach(function(e){e.classList.remove("arrowSelected")})}function C(e,t){let n=document.querySelector(r.COMPONENT);if(n&&n.classList.contains("open"))if(e.preventDefault(),t==="up"){let o=document.getElementById("country_"+(c-1));o&&(c=c-1,u(),p(o))}else{let o=document.getElementById("country_"+(c+1));o&&(c=c+1,u(),p(o))}}function M(e){if(document.activeElement===document.querySelector(r.TOGGLE)){e.preventDefault();let t=document.querySelector(r.COMPONENT);if(t&&t.classList.contains("open")){let n=document.querySelector(r.CURRENT),o=document.getElementById("country_"+c);if(n&&o&&n!==o){let i=f(o);E(i)}}}L()}function $(e){let t=e.key,n=document.querySelector(r.COMPONENT);n&&n.classList.contains("open")&&t.match(/[a-z]/i)&&X(t)}function z(){let e=document.querySelector(r.TOGGLE),t=document.querySelector(s.FIELD_INPUT);e&&t&&(e.setAttribute("tabindex","1"),t.setAttribute("tabindex","2"))}function Z(){let e=document.getElementById(s.ELEMENT);e.style.display="none";let t=document.querySelector(s.FAIL_DIV);e&&t&&(t.style.display="block")}function Q(){let e=document.getElementById(s.ELEMENT);e.style.display="none";let t=document.querySelector(s.THANKS_DIV);t&&(t.style.display="block")}async function ee(){let e=document.querySelector(s.PHONE_NUMBER),t=document.querySelector(s.COUNTRY_CODE);if(e&&t)return await fetch("https://webflow.com/api/v1/form/6273d3f75ac01db3e57995c8",{method:"POST",body:"fields[Phone Number]="+e.value+"&fields[countryCode]="+t.value+"&name=Phone Form&dolphin=false&teste=false&source=https://secondchancefinsweet.webflow.io/",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}async function te(){a();let e=await ee();e&&!e.ok?Z():Q()}function ne(){let e=document.querySelector(s.SUBMIT_BUTTON);e&&e.addEventListener("click",function(t){t.preventDefault(),document.getElementById(s.ELEMENT).reportValidity()&&(this.value=this.getAttribute("data-wait"),te())})}function H(){z(),ne()}window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{let e=await y();N(e),m(),H()});})();
